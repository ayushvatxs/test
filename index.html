<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Violina üíó</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Outfit:wght@400;700&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
/* ================= YOUR ORIGINAL STYLES (KEPT UNTOUCHED) ================= */
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(180deg,#fff,#ffd6e8);
  font-family:"Segoe UI",system-ui;
  overflow:hidden;
  overflow-y:auto;
}
@keyframes pop {
  from { transform: scale(.6); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
#codeModal{
  position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; z-index:20;
}
.codeCard{
  background:white; padding:22px; border-radius:18px; width:90%; max-width:320px; text-align:center; position:relative; box-shadow:0 25px 60px rgba(0,0,0,.25);
}
.codeCard input{ width:100%; padding:10px; margin:12px 0; }
.codeCard button{ padding:8px 18px; cursor:pointer; }
#closeModal,#closeMsg{ position:absolute; top:10px; right:12px; cursor:pointer; }
#messageBox{
  position:fixed; inset:0; background:#ffe6f2; display:none; align-items:center; justify-content:center; z-index:15;
}
#messageBox p{
  background:white; padding:24px; border-radius:20px; max-width:320px; max-height:70vh; overflow-y:auto; box-shadow:0 25px 60px rgba(255,120,170,.4);
}
#effects{ position:fixed; inset:0; pointer-events:none; z-index:5; }
#boxEffects{ position:absolute; inset:0; pointer-events:none; z-index:2; }
#messageBox p{ position:relative; z-index:3; }
.particle{ position:absolute; font-size:22px; animation:rise linear forwards; }
@keyframes rise{ from{transform:translateY(80px) scale(.6);opacity:0} 20%{opacity:1} to{transform:translateY(-120vh) scale(1.2);opacity:0} }

.card{
  width:92%; max-width:420px; background:white; border-radius:22px; padding:18px 18px 20px; text-align:center; box-shadow:0 25px 70px rgba(255,120,170,.3); position:relative; z-index:2;
}
.photo{ width:135px;height:135px; margin:0 auto 12px; border-radius:50%; overflow:hidden; border:5px solid #ffd1e5; transition: border-color 0.5s ease; }
.photo img{ width:100%;height:100%; object-fit:cover; opacity:1; transition:opacity .7s ease; }
.sub{font-size:.95rem;color:#555}
.date{margin:6px 0 6px;font-weight:600}
.timer{margin:6px 0}
.box{ background:#fff5fa; padding:10px 18px; border-radius:12px; font-weight:700; display:inline-block; }

.actions{ margin-top:-18px; padding-bottom:8px; }
.bday{
  margin:6px auto 4px; padding:11px 24px; border-radius:22px; border:none; background:#eee; color:#999; cursor:not-allowed; margin-top: 22px; transition: all 0.3s ease;
}
.secretOverlay{ position:fixed; inset:0; background:rgba(255,210,230,.85); display:none; align-items:center; justify-content:center; z-index:10; }
.secretBox{ background:#fff; padding:22px; border-radius:18px; width:90%; max-width:360px; box-shadow:0 20px 50px rgba(255,120,170,.35); animation:pop .5s ease forwards; }
.gift{ font-size:48px; cursor:pointer; margin-top:2px; animation: giftFloat 2.8s ease-in-out infinite; }
#giftText{ margin-top:4px; font-size:.95rem; color:#ff4f9a; font-weight:700; }
@keyframes giftFloat { 0% { transform: translateY(0); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0); } }
#musicBtn{ position:fixed; position:relative; }
#musicBtn.muted::after{ content:""; position:absolute; width:34px; height:3px; background:#ff4f9a; top:50%; left:50%; transform:translate(-50%,-50%) rotate(-45deg); border-radius:2px; }

/* ================= NEW PREMIUM UPGRADES (Hidden until 00:00) ================= */

/* 1. Rose Gold Title (Replaces the Blue SVG) */
#premiumBirthday {
  display: none; /* Hidden initially */
  margin-top: 20px;
  margin-bottom: 20px;
  opacity: 0;
  transform: scale(0.8);
  transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.rose-gold-text {
  font-family: 'Great Vibes', cursive;
  font-size: 3.8rem;
  line-height: 1.1;
  background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 5px 15px rgba(212, 175, 55, 0.2);
  margin: 0;
  animation: shine 3s linear infinite;
}

@keyframes shine {
  to { background-position: 200% center; }
}

.celebration-sub {
  font-family: 'Outfit', sans-serif;
  color: #888;
  font-size: 0.9rem;
  margin-top: 5px;
}

/* 2. Active Button Style */
.bday.active-party {
  background: linear-gradient(45deg, #ff4081, #ff80ab) !important;
  color: white !important;
  cursor: pointer !important;
  box-shadow: 0 10px 25px rgba(255, 64, 129, 0.4);
  transform: scale(1.1);
  animation: bounceBtn 2s infinite;
}

@keyframes bounceBtn {
  0%, 20%, 50%, 80%, 100% {transform: scale(1.1) translateY(0);}
  40% {transform: scale(1.1) translateY(-10px);}
  60% {transform: scale(1.1) translateY(-5px);}
}

</style>
</head>

<body>

<div id="effects"></div>

<div class="card">
  <div class="photo" id="mainPhoto">
    <img id="photoImg" src="photo1.jpg">
  </div>

  <h2>üíå A Special Day Is Almost Here</h2>
  <div class="sub">Because the girl who means everything to me deserves to be celebrated by the world</div>
  <div class="date">13 February</div>

  <div class="timer" id="timer"></div>

  <div id="premiumBirthday">
    <h1 class="rose-gold-text">Happy<br>Birthday!</h1>
    <div class="celebration-sub">The Queen has arrived üëë</div>
  </div>

  <div class="actions">
    <button class="bday" id="bdayBtn" disabled>Happy Birthday üéâ</button>
    <div class="gift" id="gift">üéÅ</div>
    <div id="giftText">Only for Violina üíó</div>
  </div>
</div>
  
<div id="codeModal">
  <div class="codeCard">
    <span id="closeModal">‚úñ</span>
    <h3>Secret Code üíï</h3>
    <input type="password" id="secretInput" placeholder="Enter secret code">
    <button id="openGiftBtn">Open</button>
  </div>
</div>

<div id="messageBox">
  <span id="closeMsg">‚úñ</span>
  <div id="boxEffects"></div>
  <p>
    Ayoo üò≠ only 16 days left for your birthday and I genuinely don‚Äôt know how
    to act normal anymore. My brain is already in celebration mode and my heart
    is clearly ahead of schedule ü•∞üíñ  
    <br><br>
    You don‚Äôt just make my days better, you make them easier ‚ú®  
    <br><br>
    Thinking of you feels like pressing pause on the world üíó
  </p>
</div>

<button id="musicBtn" class="muted" style="
  position:fixed;
  bottom:16px;
  right:16px;
  z-index:30;
  background:#fff;
  border:none;
  border-radius:50%;
  width:52px;
  height:52px;
  font-size:22px;
  box-shadow:0 10px 25px rgba(0,0,0,.2);
  cursor:pointer;
">
<span id="musicIcon">üéµ</span>
</button>

<audio id="loudMusic" src="happy-birthday.mp3"></audio>

<script>
// ============================================
// üü¢ TEST MODE: Set to TRUE to test the animation instantly
// üî¥ Set to FALSE for the real birthday
const TEST_MODE = true; 
// ============================================

const musicBtn = document.getElementById("musicBtn");
const loudMusic = document.getElementById("loudMusic");
const musicIcon = document.getElementById("musicIcon");

loudMusic.loop = false;
let musicUnlocked = false;
let isMuted = true;

musicBtn.onclick = () => {
  if (!musicUnlocked) {
    loudMusic.volume = 1;
    loudMusic.play().catch(()=>{});
    loudMusic.pause();
    loudMusic.currentTime = 0;
    musicUnlocked = true;
  }
  if (isMuted) {
    loudMusic.currentTime = 0;
    loudMusic.play().catch(()=>{});
    musicBtn.classList.remove("muted");
    musicIcon.textContent = "üîä";
    isMuted = false;
  } else {
    loudMusic.pause();
    musicBtn.classList.add("muted");
    musicIcon.textContent = "üéµ";
    isMuted = true;
  }
};

loudMusic.onended = () => {
  musicBtn.classList.add("muted");
  musicIcon.textContent = "üéµ";
  isMuted = true;
};

/* PHOTO ROTATION */
const photos=["photo1.jpg","photo2.jpg","photo3.jpg"];
let p=0;
const img=document.getElementById("photoImg");
setInterval(()=>{
  img.style.opacity=0;
  setTimeout(()=>{
    p=(p+1)%photos.length;
    img.src=photos[p];
    img.style.opacity=1;
  },350);
},4000);

/* TIMER LOGIC with TEST MODE */
const timer = document.getElementById("timer");
const premiumBirthday = document.getElementById("premiumBirthday");
const bdayBtn = document.getElementById("bdayBtn");
const mainPhotoContainer = document.getElementById("mainPhoto");

// Calculate Target Date
let targetDate;
if (TEST_MODE) {
    // If Test Mode is ON, set timer to 3 seconds from now
    targetDate = new Date(Date.now() + 3000);
} else {
    // Real Birthday
    targetDate = new Date("February 13, 2026 00:00:00");
}

const countdown = setInterval(() => {
  const diff = targetDate - new Date();

  if(diff <= 0) {
    // === TIMER ENDED: TRIGGER PREMIUM ANIMATION ===
    clearInterval(countdown);
    timer.style.display = "none";

    // 1. Play Music if unlocked
    if (musicUnlocked) {
      loudMusic.currentTime = 0;
      loudMusic.play();
    }

    // 2. Show Premium Rose Gold Title
    premiumBirthday.style.display = "block";
    setTimeout(() => {
        premiumBirthday.style.opacity = "1";
        premiumBirthday.style.transform = "scale(1)";
    }, 100);

    // 3. Unlock & Style Button
    bdayBtn.disabled = false;
    bdayBtn.classList.add("active-party"); // Adds the pink bouncy style

    // 4. Style the Photo Border
    mainPhotoContainer.style.borderColor = "#d4af37"; // Gold Border

    // 5. Fire REAL Confetti
    firePremiumConfetti();

  } else {
    // Update Timer Display
    const totalSeconds = Math.floor(diff / 1000);
    const days = Math.floor(totalSeconds / (24 * 60 * 60));
    const hours = Math.floor((totalSeconds % (24 * 60 * 60)) / (60 * 60));
    const minutes = Math.floor((totalSeconds % (60 * 60)) / 60);
    const seconds = totalSeconds % 60;

    timer.innerHTML = `
      <div class="box">${days}d</div>
      <div class="box">${hours}h</div>
      <div class="box">${minutes}m</div>
      <div class="box">${seconds}s</div>
    `;
  }
}, 1000);

/* CONFETTI FUNCTION */
function firePremiumConfetti() {
    var duration = 3 * 1000;
    var end = Date.now() + duration;

    (function frame() {
        // Shoot from Left
        confetti({
            particleCount: 7,
            angle: 60,
            spread: 55,
            origin: { x: 0 },
            colors: ['#ff4081', '#d4af37', '#ffffff'] // Pink, Gold, White
        });
        // Shoot from Right
        confetti({
            particleCount: 7,
            angle: 120,
            spread: 55,
            origin: { x: 1 },
            colors: ['#ff4081', '#d4af37', '#ffffff']
        });

        if (Date.now() < end) {
            requestAnimationFrame(frame);
        }
    }());
}

bdayBtn.onclick = () => {
  loudMusic.pause();
  loudMusic.currentTime = 0;
  window.location.href = "birthday.html";
};

/* GIFT LOGIC (Unchanged) */
const gift = document.getElementById("gift");
const giftText = document.getElementById("giftText");
const codeModal = document.getElementById("codeModal");
const secretInput = document.getElementById("secretInput");
const openGiftBtn = document.getElementById("openGiftBtn");
const closeModal = document.getElementById("closeModal");
const messageBox = document.getElementById("messageBox");
const closeMsg = document.getElementById("closeMsg");

function todayKey(){
  const d = new Date();
  return d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();
}

gift.onclick = () => {
  const openedDate = localStorage.getItem("giftOpenedDate");
  const today = todayKey();
  if (openedDate === today) {
    gift.textContent = "üéä";
    giftText.innerHTML = "Opened üíó<br><small>Come back tomorrow</small>";
    return;
  }
  gift.style.transform = "scale(1.2)";
  setTimeout(() => gift.style.transform = "scale(1)", 200);
  codeModal.style.display = "flex";
};

closeModal.onclick = () => { codeModal.style.display = "none"; };
closeMsg.onclick = () => { messageBox.style.display = "none"; };

openGiftBtn.onclick = () => {
  if (secretInput.value === "1313") {
    const today = todayKey();
    localStorage.setItem("giftOpenedDate", today);
    codeModal.style.display = "none";
    messageBox.style.display = "flex";
    gift.textContent = "üéä";
    giftText.innerHTML = "Opened üíó<br><small>Come back tomorrow</small>";
    gift.style.animation = "none";
    
    // Mini confetti for gift
    confetti({ particleCount: 50, spread: 60, origin: { y: 0.6 } });
  } else {
    alert("Wrong passcode üíî");
  }
};

const openedDate = localStorage.getItem("giftOpenedDate");
if (openedDate === todayKey()) {
  gift.textContent = "üéä";
  giftText.innerHTML = "Opened üíó<br><small>Come back tomorrow</small>";
}

</script>

</body>
</html>
